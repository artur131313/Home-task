Вот пример оформления домашнего задания в формате Markdown (`.md`):

```markdown
# Домашнее задание: Репликация

## Цель
Реализовать свой миникластер на 3 виртуальных машинах (ВМ) с использованием логической репликации PostgreSQL.

---

## Структура кластера

| ВМ | Назначение                   | Таблицы          | Публикации          | Подписки                                  |
|----|------------------------------|------------------|----------------------|--------------------------------------------|
| 1  | Основной узел записи         | `test` (запись) <br> `test2` (чтение) | `test`               | `test2` с ВМ №2                             |
| 2  | Вторичный узел записи        | `test2` (запись) <br> `test` (чтение) | `test2`              | `test` с ВМ №1                              |
| 3  | Реплика только для чтения и бэкапов | —                | —                    | `test` с ВМ №1 <br> `test2` с ВМ №2         |

---

## Пошаговая инструкция

### 1. Настройка логической репликации на всех ВМ

#### Общие настройки для `postgresql.conf`
- Включить поддержку логической репликации:
  ```conf
  wal_level = logical
  max_replication_slots = 10
  max_wal_senders = 10
  ```

#### В `pg_hba.conf`
- Разрешить подключения между ВМ (на всех ВМ):
  ```conf
  host    replication     реплика_пользователь    IP_другая_ВМ/32    md5
  ```

---

## ВМ №1: Публикация и подписка

### Таблицы:
```sql
CREATE TABLE test (
    id SERIAL PRIMARY KEY,
    data TEXT
);

CREATE TABLE test2 (
    id SERIAL PRIMARY KEY,
    info TEXT
);
```

### Публикация:
```sql
CREATE PUBLICATION pub_test FOR TABLE test;
```

### Подписка:
```sql
CREATE SUBSCRIPTION sub_test2
CONNECTION 'host=vm2_ip dbname=dbname user=replica password=pass'
PUBLICATION pub_test2;
```

---

## ВМ №2: Публикация и подписка

### Таблицы:
```sql
CREATE TABLE test (
    id SERIAL PRIMARY KEY,
    data TEXT
);

CREATE TABLE test2 (
    id SERIAL PRIMARY KEY,
    info TEXT
);
```

### Публикация:
```sql
CREATE PUBLICATION pub_test2 FOR TABLE test2;
```

### Подписка:
```sql
CREATE SUBSCRIPTION sub_test
CONNECTION 'host=vm1_ip dbname=dbname user=replica password=pass'
PUBLICATION pub_test;
```

---

## ВМ №3: Реплика только для чтения и бэкапов

### Таблицы:
```sql
CREATE TABLE test (
    id SERIAL PRIMARY KEY,
    data TEXT
);

CREATE TABLE test2 (
    id SERIAL PRIMARY KEY,
    info TEXT
);
```

### Подписка:
```sql
CREATE SUBSCRIPTION sub_test_vm1
CONNECTION 'host=vm1_ip dbname=dbname user=replica password=pass'
PUBLICATION pub_test;

CREATE SUBSCRIPTION sub_test2_vm2
CONNECTION 'host=vm2_ip dbname=dbname user=replica password=pass'
PUBLICATION pub_test2;
```

---

## Проверка репликации

1. Вставить строки в таблицы `test` на ВМ №1 и `test2` на ВМ №2.
2. Убедиться, что они появились на ВМ №2 и ВМ №3 соответственно.
3. Проверить логи на наличие ошибок репликации.

---

## Результат

- Настроен кластер из 3 ВМ.
- Организована двусторонняя репликация между ВМ №1 и ВМ №2.
- ВМ №3 настроена как реплика только для чтения и бэкапов.
```

Если нужно, могу адаптировать под конкретные IP-адреса, логины/пароли и схемы.